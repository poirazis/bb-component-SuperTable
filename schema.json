{
  "type": "component",
  "metadata": {},
  "schema": {
    "name": "bb-component-SuperTable",
    "friendlyName": "Super Table",
    "description": "A Fully Customizable Columnar Table Component",
    "icon": "Table",
    "hasChildren": true,
    "showEmptyState": false,
    "settings": [
      {
        "type": "dataSource",
        "key": "datasource",
        "label": "Data Source",
        "required": true
      },
      {
        "type": "field",
        "key": "idColumn",
        "label": "ID Column",
        "defaultValue" : "_id"
      },
      {
        "type": "field/sortable",
        "key": "sortColumn",
        "label": "Sort By",
        "resetOn" : "datasource"
      },
      {
        "type": "select",
        "key": "sortOrder",
        "label": "Sort Order",
        "options": [
          {"label": "Ascending" , "value": "ascending"},
          {"label": "Descending" , "value": "descending"}
        ]
      },
      {
        "type" : "filter",
        "key" : "filter",
        "label" : "Filter"
      },
      {
        "type": "number",
        "label": "Limit",
        "key": "limit",
        "defaultValue": 50
      },
      {
        "type": "columns",
        "key": "columnList",
        "resetOn" : "datasource",
        "label": "Columns",
        "nested": "true"
      },
      {
        "type": "select",
        "key": "superColumnsPos",
        "label": "Super Columns",
        "showInBar": true,
        "barStyle": "buttons",
        "options": [
          {
            "label": "First",
            "value": "first",
            "barIcon": "PaddingLeft",
            "barTitle": "Super Columns First"
          },
          {
            "label": "Last",
            "value": "last",
            "barIcon": "PaddingRight",
            "barTitle": "Super Columns Last"
          }
        ],
        "defaultValue": "first"
      },
      {
        "type": "boolean",
        "key": "autoRefresh",
        "label": "Auto Refresh",
        "defaultValue": false,
        "showInBar": true,
        "barIcon" : "Stopwatch",
        "barStyle" : "buttons",
        "barTitle" : "Auto Refresh"
      },
      {
        "type": "number",
        "key": "autoRefreshRate",
        "label": "Refresh Every (s)",
        "min" : 5,
        "defaultValue": 60,
        "dependsOn": "autoRefresh"
      },
      {
        "tag" : "style",
        "section" : true,
        "name": "Appearance",
        "collapsed" : false,
        "settings": [ 
          {
            "type": "select",
            "key": "theme",
            "label": "Theme",
            "options": [
              { "label": "Budibase", "value": "budibase" },
              { "label": "Over Background", "value": "overbg" },
              { "label": "Polarized Night", "value": "polarized" },
              { "label": "Custom", "value": "custom" }
            ],
            "defaultValue": "budibase"
          },
          {
            "type": "select",
            "key": "size",
            "label": "Size",
            "options": [
              { "label": "Small", "value": "S" },
              { "label": "Medium", "value": "M" },
              { "label": "Large", "value": "L" },
              { "label": "Custom", "value": "custom" }
            ],
            "defaultValue": "M"
          },
          {
            "type": "number",
            "key": "visibleRowCount",
            "label": "Visible Rows",
            "defaultValue": 8,
            "min": 1
          },
          {
            "type": "select",
            "key": "columnSizing",
            "label": "Column Sizing",
            "options" : [ 
              { "label" : "Flexible", "value": "flexible" }, 
              { "label" : "Fixed", "value": "fixed"} 
             ],
            "defaultValue": "flexible"
          },
          {
            "type" : "text",
            "key" : "columnMinWidth",
            "label" : "Min Width",
            "dependsOn" : { "setting" : "columnSizing", "value" : "flexible"},
            "resetsOn" : "columnSizing",
            "placeholder" : "6rem"
          },
          {
            "type" : "text",
            "key" : "columnMaxWidth",
            "label" : "Max Width",
            "dependsOn" : { "setting" : "columnSizing", "value" : "flexible"},
            "resetsOn" : "columnSizing"
          },
          {
            "type" : "text",
            "key" : "columnFixedWidth",
            "label" : "Width",
            "dependsOn" : { "setting" : "columnSizing", "value" : "fixed"}
          },
          {
            "type": "select",
            "key": "relViewMode",
            "label": "Rel. Items",
            "options" : [
              { "label" : "Pills", "value" : "pills" },
              { "label" : "Text", "value" : "text" }
            ],
            "defaultValue" : "pills"
          },
          {
            "type": "select",
            "key": "optionsViewMode",
            "label": "Option Items",
            "options" : [
              { "label" : "Pills", "value" : "pills" },
              { "label" : "Text", "value" : "text" }
            ],
            "defaultValue" : "pills"
          },
          {
            "type": "boolean",
            "key": "useOptionColors",
            "label": "Option Colors",
            "defaultValue": true,
            "dependsOn" : { "setting": "optionsViewMode", "value" : "pills"}
          },
          {
            "type": "boolean",
            "key": "customize",
            "label": "Customize",
            "defaultValue": false
          }
        ]
      },
      {
        "section": true,
        "name": "Custom Sizing Settings",
        "dependsOn": { "setting": "size", "value": "custom" },
        "tag" : "style",
        "settings": [
          {
            "type": "number",
            "key": "rowHeight",
            "label": "Row Height",
            "min": 0,
            "max": 400,
            "defaultValue": 55
          },
          {
            "type": "number",
            "key": "cellPadding",
            "label": "Cell Padding L/R",
            "min": 0,
            "max": 32,
            "defaultValue": 16
          },
          {
            "type": "number",
            "key": "rowFontSize",
            "label": "Row Font Size",
            "min": 6,
            "defaultValue": 14
          }
        ]
      },
      {
        "section" : true,
        "name": "Capabilities",
        "collapsed" : false,
        "settings": [
          {
            "type": "select",
            "key": "rowSelectMode",
            "label" : "Row Selection",
            "showInBar": true,
            "barStyle": "buttons",
            "barTitle": "Row Selection",
            "options" : [
              { "label": "Off", "value" : "off", "barIcon" : "Close" },
              { "label": "Single", "value" : "single", "barIcon" : "Checkmark" },
              { "label": "Multiple", "value" : "multi", "barIcon" : "MultipleCheck" }
            ],
            "defaultValue": "single"
          },
          {
            "type": "boolean",
            "key": "canInsert",
            "label": "Add Row",
            "defaultValue": false,
            "showInBar": true,
            "barStyle": "buttons",
            "barIcon": "Add",
            "barTitle": "Add New Row"
          },
          {
            "type": "boolean",
            "key": "canEdit",
            "label": "Edit",
            "defaultValue": false,
            "showInBar": true,
            "barStyle": "buttons",
            "barIcon": "Edit",
            "barTitle": "Editable"
          },
          {
            "type": "boolean",
            "key": "canDelete",
            "label": "Delete Rows",
            "defaultValue": false,
            "showInBar": true,
            "barStyle": "buttons",
            "barIcon": "Delete",
            "barTitle": "Delete Rows"
          },
          {
            "type": "boolean",
            "key": "canFilter",
            "label": "Filter",
            "defaultValue": true,
            "showInBar": true,
            "barStyle": "buttons",
            "barIcon": "FilterAdd",
            "barTitle": "Filterable"
          },
          {
            "type": "boolean",
            "key": "canSort",
            "label": "Sort",
            "defaultValue": true,
            "showInBar": true,
            "barStyle": "buttons",
            "barIcon": "SortOrderDown",
            "barTitle": "Sortable"
          },
          {
            "type": "boolean",
            "key": "showHeader",
            "label": "Column Headers",
            "defaultValue": true
          },
          {
            "type": "boolean",
            "key": "showFooter",
            "label": "Column Footers",
            "defaultValue": false
          }
        ]
      },
      {
        "section": true,
        "name": "Default Header Settings",
        "dependsOn": "customize",
        "tag" : "style",
        "settings": [
          {
            "type": "color",
            "key": "headerColor",
            "label": "Text"
          },
          {
            "type": "color",
            "key": "headerBgColor",
            "label": "Background"
          }
        ]
      },
      {
        "section": true,
        "name": "Default Row Settings",
        "dependsOn": "customize",
        "settings": [
          {
            "type": "select",
            "label": "Vertical Align",
            "key": "rowVerticalAlign",
            "showInBar": false,
            "barStyle": "buttons",
            "options": [
              {
                "label": "Top",
                "value": "flex-start",
                "barIcon": "AlignTop",
                "barTitle": "Align top"
              },
              {
                "label": "Middle",
                "value": "center",
                "barIcon": "AlignMiddle",
                "barTitle": "Align middle"
              },
              {
                "label": "Bottom",
                "value": "flex-end",
                "barIcon": "AlignBottom",
                "barTitle": "Align bottom"
              },
              {
                "label": "Stretch",
                "value": "stretch",
                "barIcon": "MoveUpDown",
                "barTitle": "Align stretched vertically"
              }
            ],
            "defaultValue": "flex-start"
          },
          {
            "type": "color",
            "key": "rowFontColor",
            "label": "Text"
          },
          {
            "type": "color",
            "key": "rowBackground",
            "label": "Background"
          }
        ]
      },
      {
        "section": true,
        "name": "Default Footer Settings",
        "dependsOn": "customize",
        "settings": [
          {
            "type": "color",
            "key": "footerFontColor",
            "label": "Text"
          },
          {
            "type": "color",
            "key": "footerBackground",
            "label": "Background"
          }
        ]
      },
      {
        "section": true,
        "name": "Dividers Settings",
        "dependsOn": "customize",
        "settings": [
          {
            "type": "select",
            "key": "dividers",
            "label": "Dividers",
            "options": [
              { "label": "None", "value": "none" },
              { "label": "Horizontal", "value": "horizontal" },
              { "label": "Vertical", "value": "vertical" },
              { "label": "Both", "value": "both" }
            ],
            "defaultValue": "horizontal"
          },
          {
            "type": "color",
            "key": "dividersColor",
            "label": "Dividers Color"
          },
          {
            "type": "number",
            "key": "debounce",
            "label": "Debounce",
            "min": 100,
            "defaultValue": 500,
            "dependsOn": { "setting" : "filteringMode", "value" : "debounced" },
            "info": "Debounce Delay (ms)"
          },
          {
            "type": "select",
            "key": "filteringMode",
            "label": "Filtering Mode",
            "barStyle": "buttons",
            "options": [
              { "label": "Live Debounced", "value": "debounced" },
              { "label": "On Enter", "value": "onentert" }
            ],
            "defaultValue": "debounced",
            "dependsOn": "filtering"
          },
          {
            "type": "select",
            "key": "submitOn",
            "label": "Submit Cell",
            "options": [
              { "label": "On Blur", "value": "onBlur" },
              { "label": "On Enter", "value": "onEnter" }
            ],
            "defaultValue": "onBlur",
            "dependsOn": "editable"
          }
        ]
      },
      {
        "section": true,
        "name": "Events",
        "collapsed" : true,
        "settings": [
          {
            "type": "event",
            "label": "On Row Click",
            "key" : "onRowClick",
            "context": [
              {
                "label": "Row ID",
                "key": "rowID"
              }
            ]
          },
          {
            "type": "event",
            "label": "On Row Dbl Click",
            "key" : "onRowDblClick",
            "context": [
              {
                "label": "Row ID",
                "key": "rowID"
              }
            ]
          },
          {
            "type": "event",
            "label": "On Row Select",
            "key": "onSelectionChange",
            "context": [
              {
                "label": "RowID",
                "key": "rowID"
              },
              {
                "label": "Field",
                "key": "field"
              },
              {
                "label": "Original Value",
                "key": "originalValue"
              },
              {
                "label": "New Value",
                "key": "newValue"
              }
            ]
          },
          {
            "type": "event",
            "key": "onDataChange",
            "label" : "On Cell Edit",
            "dependsOn": "canEdit",
            "context": [
              {
                "label": "RowID",
                "key": "rowID"
              },
              {
                "label": "Field",
                "key": "field"
              },
              {
                "label": "Original Value",
                "key": "originalValue"
              },
              {
                "label": "New Value",
                "key": "newValue"
              }
            ]
          }
        ]
      }
    ]
  }
}
